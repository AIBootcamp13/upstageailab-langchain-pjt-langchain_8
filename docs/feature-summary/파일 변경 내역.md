## **파일 변경 내역**

대화형 메모리 및 도구 사용 기능을 구현하기 위해 다음 파일들이 수정되었습니다.

* **pyproject.toml**:  
  * 웹 검색을 위한 langchain-tavily 라이브러리를 의존성에 추가했습니다.  
* **prompts/prompts.yaml**:  
  * update_prompt를 기존의 단순한 수정 요청 형식에서, AI가 **채팅 답변**과 **초안 수정**을 구분하여 JSON 형식으로 응답하도록 지시하는 **Tool-Calling 에이전트용 프롬프트**로 전면 교체했습니다.  
* **src/config.py**:  
  * .env 파일에서 TAVILY_API_KEY를 불러오는 로직을 추가했습니다.  
* **src/agent.py**:  
  * **가장 큰 변화가 발생한 파일입니다.**  
  * 기존의 ConversationChain 구조를 폐기하고, LangChain의 최신 표준인 create_tool_calling_agent와 AgentExecutor를 사용한 **Tool-Calling 에이전트**로 아키텍처를 변경했습니다.  
  * document_search(문서 검색)와 tavily_search(웹 검색) 도구를 에이전트에 추가했습니다.  
  * 세션 기반의 ChatMessageHistory를 도입하여 대화 기록을 관리하도록 수정했습니다.  
  * AI의 응답이 JSON 형식이 아닐 경우를 대비한 예외 처리 로직을 추가하여 안정성을 높였습니다.  
* **src/ui/components/file_uploader.py**:  
  * 업로드된 PDF를 처리한 후, 그 결과를 st.session_state에 저장하여 BlogContentAgent가 접근할 수 있도록 수정했습니다.  
* **src/ui/components/contents_editor.py**:  
  * **UI 로직의 핵심 변경이 이루어졌습니다.**  
  * 에이전트가 반환하는 JSON 응답("type": "chat" 또는 "type": "draft")을 파싱하는 로직을 추가했습니다.  
  * 응답 타입에 따라 채팅 패널에 대화 내용을 표시하거나, 왼쪽의 블로그 초안만 업데이트하도록 분기 처리하여 올바른 상호작용이 이루어지도록 수정했습니다.  
  * UI 레이아웃을 지속적으로 개선하여 에디터와 채팅 패널의 정렬을 맞추고, 채팅 입력창이 하단에 고정되도록 수정했습니다.