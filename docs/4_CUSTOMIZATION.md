# **ğŸ”§ ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•**

ì´ ë¬¸ì„œëŠ” `configs/config.yaml`ê³¼ `prompts/prompts.yaml `íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ í”„ë¡œì íŠ¸ì˜ ë™ì‘ì„ ì‚¬ìš©ìì˜ í•„ìš”ì— ë§ê²Œ ë³€ê²½í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## **1. í•µì‹¬ ë™ì‘ ì„¤ì • (configs/config.yaml)**

ì´ íŒŒì¼ì€ ëª¨ë¸, ë°ì´í„° ì²˜ë¦¬ ë°©ì‹ ë“± ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë™ì‘ì„ ì œì–´í•©ë‹ˆë‹¤.

### **1.1 í™˜ê²½ í”„ë¡œí•„ ì „í™˜**

ë³¸ í”„ë¡œì íŠ¸ëŠ” í•˜ë“œì›¨ì–´ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ ì„¤ì •ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” **í”„ë¡œí•„ ì‹œìŠ¤í…œ**ì„ ì œê³µí•©ë‹ˆë‹¤. ENV_PROFILE í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ì—¬ í”„ë¡œí•„ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* **default_cpu**: ê³ ì„±ëŠ¥ GPUê°€ ì—†ëŠ” í™˜ê²½ì„ ìœ„í•œ ê¸°ë³¸ í”„ë¡œí•„ì…ë‹ˆë‹¤. OpenAIì™€ ê°™ì€ ì™¸ë¶€ API ê¸°ë°˜ ëª¨ë¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.  
* **high_gpu**: ë¡œì»¬ GPU í™˜ê²½ì„ ìœ„í•œ í”„ë¡œí•„ì…ë‹ˆë‹¤. Ollamaë‚˜ HuggingFaceë¥¼ í†µí•´ ë¡œì»¬ì—ì„œ ëª¨ë¸ì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

**í”„ë¡œí•„ ë³€ê²½ ë°©ë²• (í„°ë¯¸ë„):**

# high_gpu í”„ë¡œí•„ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ (Linux/macOS)
```bash  
ENV_PROFILE=high_gpu poetry run streamlit run src/main.py
```

> **ë‹¤ë¥¸ ìš´ì˜ì²´ì œì—ì„œì˜ ì‚¬ìš©ë²•:**  
> Windows CMD, PowerShell ë“± ë‹¤ë¥¸ ìš´ì˜ì²´ì œì—ì„œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì • ë°©ë²•ì€ [ë¬¸ì œ í•´ê²° ê°€ì´ë“œì˜ FAQ](6_TROUBLESHOOTING.md#4-ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸-faq)ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
### **1.2 ëª¨ë¸ ë³€ê²½**

profiles ì„¹ì…˜ì—ì„œ ì‚¬ìš©í•  LLMê³¼ ì„ë² ë”© ëª¨ë¸ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
# configs/config.yaml

profiles:  
  default_cpu:  
    embedding_provider: "openai"  
    embedding_model: "text-embedding-3-large"  
    llm_provider: "openai"  
    llm_model: "gpt-4o-mini" # <-- ì´ ë¶€ë¶„ì„ gpt-4o ë“±ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥

  high_gpu:  
    embedding_provider: "huggingface"  
    embedding_model: "BAAI/bge-m3" # ë‹¤ë¥¸ HuggingFace ëª¨ë¸ë¡œ ë³€ê²½ ê°€ëŠ¥  
    llm_provider: "ollama"  
    llm_model: "llama3:8b" # ì„¤ì¹˜ëœ ë‹¤ë¥¸ Ollama ëª¨ë¸ë¡œ ë³€ê²½ ê°€ëŠ¥
```
### **1.3 ë°ì´í„° ì²˜ë¦¬ ë°©ì‹ ë³€ê²½**

ingestion ì„¹ì…˜ì—ì„œ PDF íŒŒì„œì™€ í…ìŠ¤íŠ¸ ë¶„í•  ë°©ì‹ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
# configs/config.yaml

ingestion:  
  # PDF íŒŒì„œ ì„ íƒ: "local"(PyMuPDF), "api"(Upstage), "unstructured"  
  parser: "local"

  text_splitter:  
    # í…ìŠ¤íŠ¸ë¥¼ ë‚˜ëˆŒ ì²­í¬ì˜ ìµœëŒ€ í¬ê¸° (í† í° ìˆ˜ ì•„ë‹˜)  
    chunk_size: 1024  
    # ì²­í¬ ê°„ ì¤‘ì²©ë˜ëŠ” ê¸€ì ìˆ˜  
    chunk_overlap: 256
```

* **parser**: ë¬¸ì„œ ì²˜ë¦¬ ì„±ëŠ¥ì´ë‚˜ ì •í™•ë„ì— ë”°ë¼ íŒŒì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë³µì¡í•œ í‘œë‚˜ ì´ë¯¸ì§€ê°€ í¬í•¨ëœ PDFëŠ” "unstructured"ê°€ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ë³´ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
* **chunk_size / chunk_overlap**: ì´ ê°’ì„ ì¡°ì •í•˜ë©´ RAGì˜ ê²€ìƒ‰ ì •í™•ë„ì™€ ì»¨í…ìŠ¤íŠ¸ì˜ ì–‘ì— ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤. ë¬¸ì„œì˜ ì¢…ë¥˜ì— ë”°ë¼ ìµœì ì˜ ê°’ì„ ì°¾ì•„ ì¡°ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## **2. AI ì—ì´ì „íŠ¸ í”„ë¡¬í”„íŠ¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• (prompts/prompts.yaml)**

ì´ íŒŒì¼ì€ AI ì—ì´ì „íŠ¸ì˜ ì •ì²´ì„±, ë§íˆ¬, ì‘ì—… ë°©ì‹ì„ ê²°ì •í•˜ëŠ” ì§€ì‹œë¬¸(í”„ë¡¬í”„íŠ¸)ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

### **2.1 ì´ˆê¸° ì´ˆì•ˆ ìƒì„± í”„ë¡¬í”„íŠ¸ (draft_prompt)**

ì´ í”„ë¡¬í”„íŠ¸ëŠ” ì—…ë¡œë“œëœ PDFë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì²« ë²ˆì§¸ ë¸”ë¡œê·¸ ì´ˆì•ˆì„ ìƒì„±í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

**ê¸°ë³¸ í”„ë¡¬í”„íŠ¸:**

```yaml
# prompts/prompts.yaml

draft_prompt: |  
  [Identity]  
  ë‹¹ì‹ ì€ ì „ë¬¸ ë¸”ë¡œê·¸ ì‘ê°€ì…ë‹ˆë‹¤.  
  ì œê³µëœ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ ê³ í’ˆì§ˆì˜ ë¸”ë¡œê·¸ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.

  [Source Material]  
  {content}

  [Instructions]  
  1. ìë£Œì˜ í•µì‹¬ ë‚´ìš©ì„ íŒŒì•…í•˜ì—¬ ì ì ˆí•œ ì œëª©ì„ ë§Œë“œì„¸ìš”.  
  ...
```

**ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜ˆì‹œ (í•™ìŠµ ë…¸íŠ¸ ìŠ¤íƒ€ì¼ë¡œ ë³€ê²½):**

```yaml
# prompts/prompts.yaml

draft_prompt: |  
  [Identity]  
  ë‹¹ì‹ ì€ ì§€ì‹ì„ íš¨ê³¼ì ìœ¼ë¡œ ì •ë¦¬í•˜ëŠ” íŠœí„°ì…ë‹ˆë‹¤.  
  ì£¼ì–´ì§„ í•™ìŠµ ìë£Œë¥¼ í•™ìƒë“¤ì´ ì´í•´í•˜ê¸° ì‰¬ìš´ ë¸”ë¡œê·¸ í˜•ì‹ì˜ í•™ìŠµ ë…¸íŠ¸ë¡œ ë§Œë“¤ì–´ì£¼ì„¸ìš”.

  [Source Material]  
  {content}

  [Instructions]  
  1. ê°€ì¥ í•µì‹¬ì ì¸ ì£¼ì œë¡œ ì œëª©ì„ ì •í•´ì£¼ì„¸ìš”.  
  2. ì„œë¡ , ë³¸ë¡ , ê²°ë¡  êµ¬ì¡°ë¡œ ëª…í™•í•˜ê²Œ ë‚´ìš©ì„ êµ¬ì„±í•´ì£¼ì„¸ìš”.  
  3. ì–´ë ¤ìš´ ìš©ì–´ëŠ” ì‰½ê²Œ í’€ì–´ì„œ ì„¤ëª…í•˜ê³ , ì˜ˆì‹œë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”.  
  4. ë§ˆì§€ë§‰ì—ëŠ” í•µì‹¬ ë‚´ìš©ì„ ìš”ì•½í•˜ëŠ” ì„¹ì…˜ì„ ë°˜ë“œì‹œ ì¶”ê°€í•´ì£¼ì„¸ìš”.
```

### **2.2 ëŒ€í™”í˜• ìˆ˜ì • í”„ë¡¬í”„íŠ¸ (update_prompt)**

ì´ í”„ë¡¬í”„íŠ¸ëŠ” ì‚¬ìš©ìì™€ì˜ ëŒ€í™”ë¥¼ í†µí•´ ì½˜í…ì¸ ë¥¼ ìˆ˜ì •í•˜ëŠ” Tool-Calling ì—ì´ì „íŠ¸ì˜ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì…ë‹ˆë‹¤. ì—ì´ì „íŠ¸ì˜ ì—­í• ê³¼ ì‘ë‹µ í˜•ì‹ì„ ì •ì˜í•©ë‹ˆë‹¤.

**ê¸°ë³¸ í”„ë¡¬í”„íŠ¸:**

```yaml
# prompts/prompts.yaml

update_prompt: |  
  ë‹¹ì‹ ì€ ì‚¬ìš©ìì˜ ìš”ì²­ì— ë”°ë¼ ë¸”ë¡œê·¸ ì´ˆì•ˆì„ ìˆ˜ì •í•˜ëŠ” AI ì–´ì‹œìŠ¤í„´íŠ¸ì…ë‹ˆë‹¤.  
  ...  
  ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ ë‹¤ìŒ ë‘ ê°€ì§€ ì‘ì—… ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•´ì•¼ í•©ë‹ˆë‹¤.

  1. **ì±„íŒ… ì‘ë‹µ (type: "chat")**: ë‹¨ìˆœí•œ ì§ˆë¬¸ì— ë‹µí•˜ê±°ë‚˜, ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
  2. **ì´ˆì•ˆ ìˆ˜ì • (type: "draft")**: ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°˜ì˜í•˜ì—¬ ë¸”ë¡œê·¸ ì´ˆì•ˆ ì „ì²´ë¥¼ ìˆ˜ì •í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  
  ...
```

ì´ í”„ë¡¬í”„íŠ¸ë¥¼ ìˆ˜ì •í•˜ì—¬ ì—ì´ì „íŠ¸ì˜ ì‘ë‹µ í†¤ì„ ë°”ê¾¸ê±°ë‚˜, íŠ¹ì • ê·œì¹™(ì˜ˆ: "í•­ìƒ ì¡´ëŒ“ë§ ì‚¬ìš©")ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ JSON ì‘ë‹µ í˜•ì‹ê³¼ ê´€ë ¨ëœ ì§€ì‹œë¬¸ì€ UIì™€ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ìˆìœ¼ë¯€ë¡œ, êµ¬ì¡°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” ì£¼ì˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
